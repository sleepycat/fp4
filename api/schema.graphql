scalar EmailAddress
scalar ULID
scalar ISO8601Date
scalar PositiveFloat

type DrugSeizureRecord {
  id: ID
  substance: String
  seizedOn: ISO8601Date
  reportedOn: ISO8601Date
  amount: PositiveFloat
}

type PageInfo {
  hasNextPage: Boolean!
  hasPreviousPage: Boolean!
  startCursor: ID
  endCursor: ID
}

type SeizureEdge {
  cursor: ID!
  node: DrugSeizureRecord!
}

type SeizureConnection {
  edges: [SeizureEdge]!
  pageInfo: PageInfo!
}

type Query {
  hello: String
  seizures(first: Int, after: ID last: Int, before: ID): SeizureConnection
}

enum SubstanceCategory {
  CONTROLLED_SUBSTANCES
  PRECURSORS
  CHEMICAL_OFFENCE_RELATED
  CANNABIS
  CHEMICAL_PROPERTY
}

enum UnitOfMeasure {
  GRAMS
  KILOGRAMS
  MICROGRAMS
  MILLIGRAMS
  MILLILITERS
  PATCH
  TABLETS
  CAPSULES
}

input SeizedSubstanceInput {
  name: String!
  category: SubstanceCategory!
  amount: PositiveFloat!
  unit: UnitOfMeasure!
}

input SeizureInput {
  # Police File number, police exhibit report number, HC or CBSA file number
  reference: String!
  seizedOn: ISO8601Date!
  location: String!
  substances: [SeizedSubstanceInput!]!
}

type Mutation {
  reportDrugSeizure(input: SeizureInput): String
  # Provide an email address to log in via magic links
  login(email: EmailAddress!): String
  # Verify the token you recieved to create a session.
  verify(token: ULID!): String
}
